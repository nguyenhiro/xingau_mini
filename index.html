<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game X√≠ Ng·∫ßu T√†i X·ªâu</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ƒê·ªãnh nghƒ©a bi·∫øn CSS */
        :root {
            --primary-text-color: #fff;
            --accent-color: #ffeb3b; /* Yellow for timer/results */
            --button-green: #4CAF50;
            --button-blue: #2196F3;
            --button-orange: #FF5722;
            --button-selected: #FFC107;
            --button-text-selected: #333;
            --win-color: #00FF00;
            --lose-color: #FF0000;
            --info-color: #FFD700;
            --dark-background-light: rgba(255, 255, 255, 0.15);
            --dark-background-dark: rgba(0, 0, 0, 0.3);
            
            /* Th√™m bi·∫øn cho k√≠ch th∆∞·ªõc font c∆° s·ªü ƒë·ªÉ d·ªÖ ƒëi·ªÅu ch·ªânh responsive */
            --base-font-size: 16px;
        }

        /* HTML & Body: ƒê·∫£m b·∫£o k√≠ch th∆∞·ªõc to√†n m√†n h√¨nh v√† font c∆° s·ªü */
        html {
            font-size: var(--base-font-size); /* ƒê·∫∑t font c∆° s·ªü cho REM */
        }

        body {
            font-family: 'Roboto', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: url('https://images.unsplash.com/photo-1522069213448-443a614da9b6?q=80&w=2073&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') no-repeat center center / cover;
            color: var(--primary-text-color);
            padding: 1rem; /* S·ª≠ d·ª•ng REM cho padding */
            box-sizing: border-box;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.65);
            z-index: -1;
        }

        /* Container ch√≠nh */
        .container {
            background-color: var(--dark-background-light); 
            padding: 1.5rem; /* S·ª≠ d·ª•ng REM */
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
            max-width: 800px;
            width: 100%; /* ƒê·∫£m b·∫£o n√≥ chi·∫øm ƒë·ªß chi·ªÅu r·ªông c√≥ s·∫µn */
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 1.25rem; /* S·ª≠ d·ª•ng REM */
        }

        h1 {
            font-family: 'Press Start 2P', cursive;
            margin-bottom: 1.5rem; /* S·ª≠ d·ª•ng REM */
            font-size: 2.2rem; /* S·ª≠ d·ª•ng REM */
            text-shadow: 3px 3px 8px rgba(0,0,0,0.4);
            color: var(--accent-color);
            letter-spacing: 2px;
            line-height: 1.2; /* TƒÉng line-height cho ti√™u ƒë·ªÅ l·ªõn */
        }

        #walletInfo {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap; 
            margin-bottom: 1rem; /* S·ª≠ d·ª•ng REM */
            font-size: 1.1rem; /* S·ª≠ d·ª•ng REM */
            font-weight: bold;
            background-color: var(--dark-background-light);
            padding: 0.75rem; /* S·ª≠ d·ª•ng REM */
            border-radius: 8px;
            color: var(--accent-color);
            gap: 0.5rem; /* S·ª≠ d·ª•ng REM */
        }
        #walletInfo div {
            padding: 0 0.3rem; /* S·ª≠ d·ª•ng REM */
        }

        .deposit-section, .bet-input-section {
            margin-bottom: 1.5rem; /* S·ª≠ d·ª•ng REM */
            padding: 1rem; /* S·ª≠ d·ª•ng REM */
            background-color: var(--dark-background-dark); 
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.6rem; /* S·ª≠ d·ª•ng REM */
            flex-wrap: wrap;
        }
        .deposit-section label, .bet-input-section label {
            font-weight: bold;
            font-size: 1rem; /* ƒê·∫£m b·∫£o font size nh·∫•t qu√°n */
        }
        .deposit-section button {
            padding: 0.6rem 1rem; /* S·ª≠ d·ª•ng REM */
            font-size: 1rem; /* S·ª≠ d·ª•ng REM */
            background-color: var(--button-green);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
        }
        .deposit-section button:hover {
            background-color: #388e3c;
            transform: scale(1.03);
        }
        .deposit-section button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .bet-input-section input {
            padding: 0.6rem; /* S·ª≠ d·ª•ng REM */
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background-color: rgba(0, 0, 0, 0.3);
            color: var(--primary-text-color);
            font-size: 1rem; /* S·ª≠ d·ª•ng REM */
            width: 80px; /* Chi·ªÅu r·ªông t∆∞∆°ng ƒë·ªëi */
            max-width: 120px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa */
            text-align: center;
        }
        .bet-input-section input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 5px var(--accent-color);
        }
        
        #timerDisplay {
            font-size: 1.5rem; /* S·ª≠ d·ª•ng REM */
            margin-bottom: 1.25rem; /* S·ª≠ d·ª•ng REM */
            color: var(--accent-color);
        }

        .bet-options {
            display: flex;
            flex-direction: column;
            gap: 1rem; /* S·ª≠ d·ª•ng REM */
            margin-bottom: 1.75rem; /* S·ª≠ d·ª•ng REM */
        }

        .bet-group {
            display: flex;
            justify-content: center;
            gap: 0.75rem; /* S·ª≠ d·ª•ng REM */
            flex-wrap: wrap;
        }

        .bet-button {
            padding: 1rem 1.2rem; /* S·ª≠ d·ª•ng REM */
            font-size: 1.05rem; /* S·ª≠ d·ª•ng REM */
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background-color: var(--button-green);
            color: var(--primary-text-color);
            transition: transform 0.2s, background-color 0.2s, box-shadow 0.2s;
            flex: 1; /* Cho ph√©p c√°c n√∫t co gi√£n */
            min-width: 110px; /* Gi·∫£m min-width cho m√†n h√¨nh nh·ªè h∆°n */
            max-width: 150px; /* Gi·ªõi h·∫°n max-width */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        .bet-button.selected {
            background-color: var(--button-selected);
            color: var(--button-text-selected);
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        .bet-button:not(.selected):hover {
            transform: scale(1.03);
            background-color: #388e3c;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.25);
        }

        .bet-button[data-bet-type="tai"],
        .bet-button[data-bet-type="xiu"] {
            flex-basis: 48%; /* Cho ph√©p chi·∫øm g·∫ßn m·ªôt n·ª≠a */
            max-width: 200px;
        }

        .single-number-bets .bet-button {
            background-color: var(--button-blue);
            flex-basis: 15%; /* Gi·ªØ nguy√™n nh∆∞ng ƒë·∫£m b·∫£o min-width ƒë·ªß l·ªõn */
            min-width: 50px; /* Gi·∫£m min-width cho ƒëi·ªán tho·∫°i */
            max-width: 70px; /* Gi·ªõi h·∫°n max-width */
        }
        .single-number-bets .bet-button:not(.selected):hover {
            background-color: #1976D2;
        }

        #diceResult {
            font-size: 3.5rem; /* S·ª≠ d·ª•ng REM */
            font-weight: bold;
            margin: 1.5rem 0; /* S·ª≠ d·ª•ng REM */
            min-height: 90px; /* Gi·∫£m min-height */
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-color);
            text-shadow: 3px 3px 8px rgba(0,0,0,0.4);
        }

        .dice-face {
            width: 80px; /* Gi·∫£m k√≠ch th∆∞·ªõc x√≠ ng·∫ßu */
            height: 80px; /* Gi·∫£m k√≠ch th∆∞·ªõc x√≠ ng·∫ßu */
            background-color: #eee;
            border: 5px solid #333; /* Gi·∫£m ƒë·ªô d√†y vi·ªÅn */
            border-radius: 15px; /* Gi·∫£m border-radius */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem; /* Gi·∫£m font size c·ªßa s·ªë tr√™n x√≠ ng·∫ßu */
            color: #333;
            box-shadow: 0 6px 15px rgba(0,0,0,0.4); /* Gi·∫£m box-shadow */
            transition: transform 0.3s ease-out;
        }
        @keyframes diceSpin {
            0% { transform: rotate(0deg) scale(0.8); opacity: 0.5; }
            50% { transform: rotate(180deg) scale(1.1); opacity: 1; }
            100% { transform: rotate(360deg) scale(0.8); opacity: 0.5; }
        }
        .spinning {
            animation: diceSpin 0.5s infinite cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        #message {
            font-size: 1.1rem; /* S·ª≠ d·ª•ng REM */
            margin-top: 1rem; /* S·ª≠ d·ª•ng REM */
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        #playAgainBtn {
            padding: 0.8rem 1.5rem; /* S·ª≠ d·ª•ng REM */
            font-size: 1.1rem; /* S·ª≠ d·ª•ng REM */
            background-color: var(--button-orange);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 1.5rem; /* S·ª≠ d·ª•ng REM */
            transition: background-color 0.2s, transform 0.2s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        #playAgainBtn:hover {
            background-color: #e64a19;
            transform: scale(1.05);
        }
        #playAgainBtn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* L·ªãch s·ª≠ ƒë·∫∑t c∆∞·ª£c */
        #historySection {
            margin-top: 1.25rem; /* S·ª≠ d·ª•ng REM */
            background-color: var(--dark-background-dark);
            padding: 1.25rem; /* S·ª≠ d·ª•ng REM */
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-align: left;
            max-height: 250px; /* Gi·∫£m max-height */
            overflow-y: auto; 
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 800px;
            width: 100%;
        }
        #historySection h2 {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2rem; /* S·ª≠ d·ª•ng REM */
            color: var(--accent-color);
            margin-bottom: 1rem; /* S·ª≠ d·ª•ng REM */
            text-align: center;
        }
        #betHistory {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #betHistory li {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 0.75rem; /* S·ª≠ d·ª•ng REM */
            margin-bottom: 0.5rem; /* S·ª≠ d·ª•ng REM */
            border-radius: 5px;
            font-size: 0.9rem; /* S·ª≠ d·ª•ng REM */
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap; /* Cho ph√©p wrap tr√™n m√†n h√¨nh nh·ªè */
            gap: 0.5rem; /* Kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ trong li */
        }
        #betHistory li span {
            /* Lo·∫°i b·ªè margin-right c·ªë ƒë·ªãnh ƒë·ªÉ flexbox t·ª± qu·∫£n l√Ω */
            margin-right: 0; 
        }
        #betHistory li .bet-detail {
            font-weight: bold;
            color: #FFD700;
        }
        #betHistory li .result-detail {
            color: var(--primary-text-color);
        }
        #betHistory li .win-loss {
            font-weight: bold;
            padding: 0.15rem 0.3rem; /* S·ª≠ d·ª•ng REM */
            border-radius: 3px;
            white-space: nowrap; /* Gi·ªØ nguy√™n d√≤ng cho tr·∫°ng th√°i th·∫Øng/thua */
        }
        #betHistory li .win {
            color: var(--win-color);
        }
        #betHistory li .lose {
            color: var(--lose-color);
        }

        /* ======================================= */
        /* MEDIA QUERIES cho c√°c k√≠ch th∆∞·ªõc m√†n h√¨nh */
        /* ======================================= */

        /* Cho m√†n h√¨nh nh·ªè h∆°n 768px (ƒëi·ªán tho·∫°i, m√°y t√≠nh b·∫£ng d·ªçc) */
        @media (max-width: 768px) {
            :root {
                --base-font-size: 14px; /* Gi·∫£m font c∆° s·ªü */
            }

            h1 {
                font-size: 1.8rem; /* Gi·∫£m k√≠ch th∆∞·ªõc ti√™u ƒë·ªÅ */
                margin-bottom: 1.2rem;
            }

            .container {
                padding: 1rem; /* Gi·∫£m padding t·ªïng th·ªÉ */
                margin-bottom: 1rem;
            }

            #walletInfo {
                flex-direction: column; /* X·∫øp th√¥ng tin v√≠ theo c·ªôt */
                align-items: center;
                gap: 0.3rem; /* Gi·∫£m kho·∫£ng c√°ch */
                font-size: 1rem;
            }

            .deposit-section, .bet-input-section {
                flex-direction: column; /* X·∫øp c√°c ph·∫ßn t·ª≠ theo c·ªôt */
                gap: 0.5rem; /* Gi·∫£m kho·∫£ng c√°ch */
                padding: 0.8rem;
            }
            .deposit-section label, .bet-input-section label {
                margin-bottom: 0.2rem; /* Th√™m kho·∫£ng c√°ch n·∫øu c·∫ßn */
            }
            .bet-input-section input {
                width: 100%; /* Chi·∫øm to√†n b·ªô chi·ªÅu r·ªông c√≥ s·∫µn */
                max-width: 150px; /* Nh∆∞ng v·∫´n gi·ªõi h·∫°n t·ªëi ƒëa */
            }

            #timerDisplay {
                font-size: 1.3rem;
                margin-bottom: 1rem;
            }

            .bet-group {
                gap: 0.5rem; /* Gi·∫£m kho·∫£ng c√°ch gi·ªØa c√°c n√∫t c∆∞·ª£c */
            }

            .bet-button {
                padding: 0.8rem 1rem; /* Gi·∫£m padding n√∫t c∆∞·ª£c */
                font-size: 0.9rem; /* Gi·∫£m font size n√∫t c∆∞·ª£c */
                min-width: unset; /* B·ªè min-width ƒë·ªÉ flex:1 ho·∫°t ƒë·ªông linh ho·∫°t h∆°n */
                flex-basis: 48%; /* Cho ph√©p hai c·ªôt */
            }
            .single-number-bets .bet-button {
                flex-basis: calc(33.33% - 0.5rem); /* 3 c·ªôt cho s·ªë ƒë∆°n */
                min-width: unset;
                max-width: unset;
            }

            #diceResult {
                font-size: 3rem; /* Gi·∫£m k√≠ch th∆∞·ªõc k·∫øt qu·∫£ x√≠ ng·∫ßu */
                margin: 1.2rem 0;
                min-height: 70px;
            }
            .dice-face {
                width: 70px; /* Gi·∫£m k√≠ch th∆∞·ªõc x√≠ ng·∫ßu */
                height: 70px;
                font-size: 2.5rem; /* Gi·∫£m font s·ªë tr√™n x√≠ ng·∫ßu */
                border-width: 4px; /* Gi·∫£m ƒë·ªô d√†y vi·ªÅn */
            }

            #message {
                font-size: 0.95rem;
                margin-top: 0.8rem;
            }

            #playAgainBtn {
                padding: 0.7rem 1.2rem;
                font-size: 1rem;
                margin-top: 1rem;
            }

            #historySection {
                padding: 1rem;
                max-height: 200px; /* Gi·∫£m max-height cho l·ªãch s·ª≠ */
            }
            #historySection h2 {
                font-size: 1.1rem;
                margin-bottom: 0.8rem;
            }
            #betHistory li {
                font-size: 0.85rem;
                padding: 0.6rem;
                flex-direction: column; /* X·∫øp l·ªãch s·ª≠ theo c·ªôt tr√™n m√†n h√¨nh si√™u nh·ªè */
                align-items: flex-start;
                gap: 0.3rem;
            }
            #betHistory li .win-loss {
                align-self: flex-end; /* Di chuy·ªÉn th·∫Øng thua sang ph·∫£i */
            }
        }

        /* Cho m√†n h√¨nh c·ª±c nh·ªè (ƒëi·ªán tho·∫°i c≈©, d∆∞·ªõi 480px) */
        @media (max-width: 480px) {
            :root {
                --base-font-size: 12px; /* Gi·∫£m font c∆° s·ªü h∆°n n·ªØa */
            }

            h1 {
                font-size: 1.5rem;
            }

            .container {
                padding: 0.8rem;
            }

            .bet-button {
                flex-basis: 100%; /* M·ªói n√∫t c∆∞·ª£c chi·∫øm 1 d√≤ng */
                max-width: 100%;
            }
            .bet-button[data-bet-type="tai"],
            .bet-button[data-bet-type="xiu"] {
                flex-basis: 100%;
            }
            .single-number-bets .bet-button {
                flex-basis: calc(33.33% - 0.4rem); /* V·∫´n c·ªë g·∫Øng gi·ªØ 3 c·ªôt n·∫øu kh√¥ng qu√° ch·∫≠t */
            }

            #diceResult {
                font-size: 2.5rem;
            }
            .dice-face {
                width: 60px;
                height: 60px;
                font-size: 2rem;
            }
            
            #betHistory li {
                font-size: 0.8rem;
                padding: 0.5rem;
            }
        }

        /* Cho m√†n h√¨nh l·ªõn (tr√™n 1200px, m√°y t√≠nh ƒë·ªÉ b√†n l·ªõn) */
        @media (min-width: 1200px) {
            :root {
                --base-font-size: 18px; /* TƒÉng font c∆° s·ªü */
            }
            .container {
                max-width: 960px; /* Gi·ªõi h·∫°n r·ªông h∆°n m·ªôt ch√∫t */
            }
            h1 {
                font-size: 2.8rem;
            }
            #walletInfo {
                font-size: 1.3rem;
            }
            .bet-button {
                font-size: 1.2rem;
                padding: 1.2rem 1.5rem;
            }
            #diceResult {
                font-size: 4.5rem;
            }
            .dice-face {
                width: 100px;
                height: 100px;
                font-size: 4rem;
            }
            #message {
                font-size: 1.6rem;
            }
            #playAgainBtn {
                font-size: 1.3rem;
            }
            #historySection h2 {
                font-size: 1.8rem;
            }
            #betHistory li {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé≤ Game X√≠ Ng·∫ßu T√†i X·ªâu üé≤</h1>
        
        <div id="walletInfo">
            <div>Xu c·ªßa b·∫°n: <span id="currentBalance">1000</span></div>
            <div>T·ªïng c∆∞·ª£c h·ªá th·ªëng: <span id="systemBalance">1,000,000</span></div>
        </div>
        
        <div class="deposit-section">
            <label>N·∫°p 1000 xu:</label>
            <button id="depositBtn">Nh·∫≠n Xu</button>
        </div>

        <div class="bet-input-section">
            <label for="betAmount">ƒê·∫∑t c∆∞·ª£c:</label>
            <input type="number" id="betAmount" value="100" min="1">
        </div>

        <div id="timerDisplay">Th·ªùi gian ƒë·∫∑t c∆∞·ª£c: 10s</div>
        
        <div class="bet-options">
            <div class="bet-group">
                <button class="bet-button" data-bet-type="tai" data-numbers="4,5,6">T√†i (4-5-6)</button>
                <button class="bet-button" data-bet-type="xiu" data-numbers="1,2,3">X·ªâu (1-2-3)</button>
            </div>
            <div class="single-number-bets bet-group">
                <button class="bet-button" data-bet-type="number" data-numbers="1">1</button>
                <button class="bet-button" data-bet-type="number" data-numbers="2">2</button>
                <button class="bet-button" data-bet-type="number" data-numbers="3">3</button>
                <button class="bet-button" data-bet-type="number" data-numbers="4">4</button>
                <button class="bet-button" data-bet-type="number" data-numbers="5">5</button>
                <button class="bet-button" data-bet-type="number" data-numbers="6">6</button>
            </div>
        </div>

        <div id="diceResult">H√£y ƒë·∫∑t c∆∞·ª£c!</div>
        <div id="message"></div>
        <button id="playAgainBtn" style="display: none;">Ch∆°i L·∫°i</button>
    </div>

    <div id="historySection" class="container">
        <h2>L·ªãch S·ª≠ ƒê·∫∑t C∆∞·ª£c</h2>
        <ul id="betHistory">
            </ul>
    </div>

    <script>
        const timerDisplay = document.getElementById('timerDisplay');
        const diceResultDisplay = document.getElementById('diceResult');
        const messageDisplay = document.getElementById('message');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const betButtons = document.querySelectorAll('.bet-button');
        
        const currentBalanceDisplay = document.getElementById('currentBalance');
        const systemBalanceDisplay = document.getElementById('systemBalance');
        const depositBtn = document.getElementById('depositBtn');
        const betAmountInput = document.getElementById('betAmount');
        const betHistoryList = document.getElementById('betHistory');

        // L·∫•y c√°c gi√° tr·ªã m√†u t·ª´ CSS ƒë·ªÉ d√πng trong JS
        const winColor = getComputedStyle(document.documentElement).getPropertyValue('--win-color');
        const loseColor = getComputedStyle(document.documentElement).getPropertyValue('--lose-color');
        const infoColor = getComputedStyle(document.documentElement).getPropertyValue('--info-color');

        let currentBalance = 1000; 
        let systemBalance = 1000000; 
        let timeLeft = 10;
        let timerInterval;
        let selectedBet = null; 
        let selectedNumbers = []; 
        let currentBetAmount = 0; 

        // C·∫≠p nh·∫≠t hi·ªÉn th·ªã s·ªë xu trong v√≠
        function updateWalletDisplay() {
            currentBalanceDisplay.textContent = currentBalance.toLocaleString();
            systemBalanceDisplay.textContent = systemBalance.toLocaleString();
        }

        // X·ª≠ l√Ω n·∫°p 1000 xu m·ªói l·∫ßn nh·∫•n
        depositBtn.addEventListener('click', () => {
            currentBalance += 1000;
            updateWalletDisplay();
            messageDisplay.textContent = `B·∫°n ƒë√£ nh·∫≠n 1000 xu! T·ªïng xu: ${currentBalance.toLocaleString()}`;
            messageDisplay.style.color = infoColor;
        });

        // H√†m kh·ªüi t·∫°o ho·∫∑c ch∆°i l·∫°i game
        function initializeGame() {
            clearInterval(timerInterval); 
            timeLeft = 10;
            selectedBet = null;
            selectedNumbers = [];
            currentBetAmount = 0; 
            messageDisplay.textContent = '';
            diceResultDisplay.innerHTML = 'H√£y ƒë·∫∑t c∆∞·ª£c!';
            playAgainBtn.style.display = 'none'; 
            playAgainBtn.disabled = true;

            betButtons.forEach(button => {
                button.classList.remove('selected');
                button.disabled = false; 
            });
            depositBtn.disabled = false; 
            betAmountInput.disabled = false; 

            updateWalletDisplay(); 
            startBettingPhase();
        }

        // B·∫Øt ƒë·∫ßu giai ƒëo·∫°n ƒë·∫∑t c∆∞·ª£c
        function startBettingPhase() {
            timerDisplay.textContent = `Th·ªùi gian ƒë·∫∑t c∆∞·ª£c: ${timeLeft}s`;
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = `Th·ªùi gian ƒë·∫∑t c∆∞·ª£c: ${timeLeft}s`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endBettingPhase();
                }
            }, 1000);
        }

        // K·∫øt th√∫c giai ƒëo·∫°n ƒë·∫∑t c∆∞·ª£c v√† chu·∫©n b·ªã ƒë·ªï x√≠ ng·∫ßu
        function endBettingPhase() {
            betButtons.forEach(button => { button.disabled = true; });
            depositBtn.disabled = true;
            betAmountInput.disabled = true;

            currentBetAmount = parseInt(betAmountInput.value);

            if (selectedBet === null) {
                messageDisplay.textContent = 'B·∫°n ch∆∞a ch·ªçn c·ª≠a ƒë·∫∑t c∆∞·ª£c! Kh√¥ng c√≥ c∆∞·ª£c n√†o ƒë∆∞·ª£c th·ª±c hi·ªán.';
                messageDisplay.style.color = infoColor;
                playAgainBtn.style.display = 'block';
                playAgainBtn.disabled = false;
                return;
            }

            if (isNaN(currentBetAmount) || currentBetAmount <= 0) {
                messageDisplay.textContent = `Vui l√≤ng nh·∫≠p s·ªë xu mu·ªën ƒë·∫∑t c∆∞·ª£c h·ª£p l·ªá (l·ªõn h∆°n 0).`;
                messageDisplay.style.color = infoColor;
                playAgainBtn.style.display = 'block';
                playAgainBtn.disabled = false;
                return;
            }
            
            if (currentBetAmount > currentBalance) {
                messageDisplay.textContent = `B·∫°n kh√¥ng ƒë·ªß xu ƒë·ªÉ ƒë·∫∑t ${currentBetAmount.toLocaleString()} xu! S·ªë xu hi·ªán c√≥: ${currentBalance.toLocaleString()}.`;
                messageDisplay.style.color = loseColor;
                playAgainBtn.style.display = 'block';
                playAgainBtn.disabled = false;
                return;
            }
            
            currentBalance -= currentBetAmount;
            updateWalletDisplay();
            messageDisplay.textContent = `ƒê√£ ƒë·∫∑t ${currentBetAmount.toLocaleString()} xu. Ch·ªù k·∫øt qu·∫£...`;
            messageDisplay.style.color = infoColor;

            rollDice();
        }

        // X·ª≠ l√Ω khi ng∆∞·ªùi ch∆°i ch·ªçn c∆∞·ª£c
        function selectBet(event) {
            if (timeLeft <= 0 || currentBalance <= 0) {
                messageDisplay.textContent = `H√£y N·∫°p Xu ho·∫∑c ch·ªù v√≤ng m·ªõi ƒë·ªÉ ƒë·∫∑t c∆∞·ª£c!`;
                messageDisplay.style.color = infoColor;
                return;
            }

            betButtons.forEach(button => {
                button.classList.remove('selected');
            });

            const clickedButton = event.target;
            clickedButton.classList.add('selected');

            selectedBet = clickedButton.dataset.betType;
            selectedNumbers = clickedButton.dataset.numbers.split(',').map(Number); 
            
            messageDisplay.textContent = `B·∫°n ƒë√£ ch·ªçn: ${clickedButton.textContent}. H√£y nh·∫≠p s·ªë xu v√† ch·ªù th·ªùi gian ƒë·∫øm ng∆∞·ª£c.`;
            messageDisplay.style.color = infoColor;
        }

        // Quay v√† hi·ªÉn th·ªã k·∫øt qu·∫£ x√≠ ng·∫ßu
        function rollDice() {
            timerDisplay.textContent = 'K·∫øt qu·∫£ x√≠ ng·∫ßu:';
            diceResultDisplay.innerHTML = '<div class="dice-face spinning"></div>'; 

            setTimeout(() => {
                const result = Math.floor(Math.random() * 6) + 1; 
                diceResultDisplay.innerHTML = `<div class="dice-face">${result}</div>`; 

                checkResult(result);
                playAgainBtn.style.display = 'block';
                playAgainBtn.disabled = false;
            }, 3000); 
        }

        // Ki·ªÉm tra k·∫øt qu·∫£ v√† th√¥ng b√°o th·∫Øng/thua
        function checkResult(diceResult) {
            let isWinner = false;
            let currentBetText = 'ch∆∞a ƒë·∫∑t c∆∞·ª£c'; 
            let winnings = 0; // S·ªë xu ng∆∞·ªùi ch∆°i nh·∫≠n ƒë∆∞·ª£c (g·ªëc + l√£i)
            let systemProfit = 0; // S·ªë xu h·ªá th·ªëng l√£i/l·ªó t·ª´ l∆∞·ª£t n√†y

            const selectedButtonElement = Array.from(betButtons).find(btn => btn.classList.contains('selected'));
            if (selectedButtonElement) {
                currentBetText = selectedButtonElement.textContent;
            }

            if (currentBetAmount === 0 || selectedBet === null) {
                return; 
            }

            let winMultiplier = 0; 

            if (selectedBet === 'tai' && diceResult >= 4 && diceResult <= 6) {
                isWinner = true;
                winMultiplier = 2; // ƒÇn 100% (g·∫•p ƒë√¥i s·ªë ƒë·∫∑t)
            } else if (selectedBet === 'xiu' && diceResult >= 1 && diceResult <= 3) {
                isWinner = true;
                winMultiplier = 2; // ƒÇn 100% (g·∫•p ƒë√¥i s·ªë ƒë·∫∑t)
            } else if (selectedBet === 'number' && selectedNumbers.includes(diceResult)) {
                isWinner = true;
                winMultiplier = 5; // ƒÇn 500% (g·∫•p 5 l·∫ßn s·ªë ƒë·∫∑t)
            }

            if (isWinner) {
                winnings = currentBetAmount * winMultiplier;
                currentBalance += winnings; 
                systemProfit = currentBetAmount - winnings; // N·∫øu ng∆∞·ªùi ch∆°i th·∫Øng, h·ªá th·ªëng b·ªã l·ªó (s·ªë √¢m)
                
                messageDisplay.textContent = `üéâ B·∫°n ƒë√£ chi·∫øn th·∫Øng ${winnings.toLocaleString()} xu! T·ªïng xu: ${currentBalance.toLocaleString()}. K·∫øt qu·∫£: ${diceResult}.`;
                messageDisplay.style.color = winColor;
                addHistoryEntry(currentBetText, currentBetAmount, diceResult, 'Th·∫Øng', winnings);
            } else {
                systemProfit = currentBetAmount; // N·∫øu ng∆∞·ªùi ch∆°i thua, h·ªá th·ªëng l√£i s·ªë ti·ªÅn ng∆∞·ªùi ch∆°i ƒë·∫∑t
                
                messageDisplay.textContent = `üò¢ B·∫°n ƒë√£ thua ${currentBetAmount.toLocaleString()} xu. K·∫øt qu·∫£: ${diceResult}. B·∫°n ƒë√£ ƒë·∫∑t c∆∞·ª£c v√†o: ${currentBetText}. S·ªë xu c√≤n l·∫°i: ${currentBalance.toLocaleString()}.`;
                messageDisplay.style.color = loseColor;
                addHistoryEntry(currentBetText, currentBetAmount, diceResult, 'Thua', -currentBetAmount); 
            }
            
            systemBalance += systemProfit; // C·ªông/tr·ª´ ti·ªÅn l√£i/l·ªó c·ªßa h·ªá th·ªëng
            updateWalletDisplay(); 
            currentBetAmount = 0; 
            betAmountInput.value = 100; 
        }

        // H√†m th√™m l·ªãch s·ª≠ ƒë·∫∑t c∆∞·ª£c
        function addHistoryEntry(betType, betAmount, diceResult, status, balanceChange) {
            const listItem = document.createElement('li');
            let changeText = '';
            let changeClass = '';

            if (status === 'Th·∫Øng') {
                changeText = `+${balanceChange.toLocaleString()} xu`;
                changeClass = 'win';
            } else {
                changeText = `${balanceChange.toLocaleString()} xu`; // ƒë√£ l√† s·ªë √¢m
                changeClass = 'lose';
            }

            listItem.innerHTML = `
                <span class="bet-detail">C∆∞·ª£c: ${betType} (${betAmount.toLocaleString()} xu)</span>
                <span class="result-detail">KQ: ${diceResult}</span>
                <span class="win-loss ${changeClass}">${status} (${changeText})</span>
            `;
            betHistoryList.prepend(listItem); 
            if (betHistoryList.children.length > 10) { 
                betHistoryList.removeChild(betHistoryList.lastChild);
            }
        }

        betButtons.forEach(button => {
            button.addEventListener('click', selectBet);
        });

        playAgainBtn.addEventListener('click', initializeGame);

        initializeGame();
    </script>
</body>
</html>
